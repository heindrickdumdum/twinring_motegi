<%
if (typeof modifier === 'undefined'){
  var modifier = '';
}


%>


<% if(dataProgramList) { var arrTabs = [];var checked="checked" %>
  <div class="u-show-pc">
    <ol id="tabs" class="tabs u-show-pc" >
      <% dataProgramList.forEach( item => { %>
            <% if(arrTabs.indexOf(item.month) === -1) { %>
              <li class="tab"><% if(arrTabs.length > 0) {checked=""} %>
                <input type="radio" id="tab-<%- item.month %>" name="tab-month" class="tab-month" value="<%- item.month %>" <%- checked %>>
                <label for="tab-<%- item.month %>"><%- item.month %>月</label>
              </li>
            <% arrTabs.push(item.month) %>
        <% } %>
      <% }) %>
    </ol>
  </div>

  <div class="l-section-title u-show-sp program-dropdown-title">
    <%- include('/partials/svg', {
      'name': 'program-dropdown-title'
    }) %>
  </div>
  <div class="custom-select u-show-sp">
    <div id="customSelect" class="select-selected"><%- arrTabs[0] %>月</div>
    <div id="customSelectItems" class="select-items select-hide">
      <% arrTabs.forEach( item => { %>
        <div class="option" value="<%- item %>"><%- item %>月</div>
      <% }) %>
    </div>
  </div>

  <script>
    function tabs(){

      /* PC Tabs */
      var tab = document.getElementsByName('tab-month');
      for(i = 0; i < tab.length; i++) {
        tab[i].onchange = function() {
            document.getElementById('program-list').setAttribute("data-tab", this.value);
        }
      }

      /* SP Dropdown - show options */
      var tabSPselect = document.getElementById('customSelect');
      tabSPselect.addEventListener('click',function(){
        this.classList.toggle('open');
        document.getElementById('customSelectItems').classList.toggle('select-hide')
      });

      /* SP Dropdown - select option */
      var optionSP = document.querySelectorAll('.option'); 
      for (i = 0; i < optionSP.length; ++i) {
        optionSP[i].addEventListener('click',function(){
          tabSPselect.innerText = this.getAttribute('value')+"月";
          document.getElementById('program-list').setAttribute("data-tab", this.getAttribute('value'));
          document.getElementById('customSelect').classList.toggle('open');
          document.getElementById('customSelectItems').classList.toggle('select-hide');
      })
      };
    }

    tabs();
  </script>
<% } %>

<% if(dataProgramList) { %>
  <ul id="program-list" class="carbike-list program-list" data-tab="3">
    <% dataProgramList.forEach( item => { %>
      
      <li class="carbike-item program-item" data-month="<%- item.month %>">
        <div class="ribbon-text"><%- item.ribbon %></div>
        <a class="carbike-item-link" href="<%- item.link %>">
          <article class="carbike-article <%- modifier %>">
            <div class="carbike-article-thumb">
              
              <div class="carbike-article-thumb-img"
                  style="background-image: url(<%- item.imgPath %>)">
                </div>
              <span class="carbike-article-cat carbike-article-cat-bg-<%- item.categoryBg %> program-cat">
                <%- item.category %>
              </span>
            </div>

            <div class="carbike-article-content">
              <h3 class="carbike-article-title">
                <span>
                  <%- item.title %>
                  <% if(item.icon !== '') { %>
                    <i class="ico-carbike ico-carbike-<%- item.icon %>"></i>
                  <% } %>
                </span>


              </h3>

              <ul class="carbike-article-list">
                <% item.dataList.forEach( dataitem => { %>
                  <li class="carbike-article-list-item">
                    <span class="carbike-article-list-label"><%= dataitem.label %></span>
                    <p class="carbike-article-list-desc"><%- dataitem.content %></p>
                  </li>
                <% }) %>
              </ul>

              <div class="carbike-article-more">
                <div class="carbike-article-more-link">
                  <span>詳細はこちら</span>
                </div>
              </div>
            </div>

            <p class="period">
              開催期間：<%- item.period %>
            </p>
          </article>
        </a>
      </li>
    <% }) %>
  </ul>
<% } %>
